/*
 * ========================================================================================================
 * МОДЕЛ: ЧЛЕН НА БИБЛИОТЕКАТА (MEMBER)
 * ========================================================================================================
 * Автор: Божидар Георгиев
 * Email: 136ikz@unibit.bg
 * 
 * Описание:
 * Модел за член на библиотеката (читател).
 * Съхранява информация за членството, типа на абонамента и връзката с потребителския акаунт.
 * 
 * Връзки с други модели:
 * - ApplicationUser (потребителски акаунт) - "един към един"
 * - MembershipType (тип членство) - "много към един"
 * - Borrowing (заемания) - "един към много"
 * - Reservation (резервации) - "един към много"
 * - Fine (глоби) - "един към много"
 * - LibraryEvent (събития) - "много към много"
 * ========================================================================================================
 */

namespace Library.Models
{
    /// <summary>
    /// Модел за член на библиотеката
    /// Автор: Божидар Георгиев (136ikz@unibit.bg)
    /// </summary>
    public class Member
    {
        /// <summary>
        /// Уникален идентификатор на члена
        /// </summary>
        public int Id { get; set; }

        /// <summary>
        /// Дата на регистрация в библиотеката
        /// Записва кога потребителят е станал член
        /// </summary>
        public DateTime MembershipDate { get; set; }

        /// <summary>
        /// ID на типа членство (Basic, Premium и др.)
        /// Незадължително поле
        /// </summary>
        public int? MembershipTypeId { get; set; }

        /// <summary>
        /// ID на свързания потребителски акаунт
        /// Всеки член има свой ApplicationUser за автентикация
        /// </summary>
        public string ApplicatioUserId { get; set; }

        // ========================================================================================================
        // НАВИГАЦИОННИ СВОЙСТВА
        // ========================================================================================================

        /// <summary>
        /// Потребителски акаунт на члена (навигационно свойство)
        /// Съдържа информация за логин, имейл, парола и др.
        /// </summary>
        public ApplicationUser ApplicationUser { get; set; }

        /// <summary>
        /// Тип на членството (навигационно свойство)
        /// Определя привилегиите и ограниченията на члена
        /// </summary>
        public MembershipType MembershipType { get; set; }

        /// <summary>
        /// Колекция от заемания на книги
        /// Един член може да има много заемания във времето
        /// </summary>
        public ICollection<Borrowing> Borrowings { get; set; }

        /// <summary>
        /// Колекция от резервации на книги
        /// Член може да резервира книги, които са временно недостъпни
        /// </summary>
        public ICollection<Reservation> Reservations { get; set; }

        /// <summary>
        /// Колекция от глоби
        /// Записват се глоби за забавени връщания или повредени книги
        /// </summary>
        public ICollection<Fine> Fines { get; set; }

        /// <summary>
        /// Колекция от събития, в които членът участва
        /// Реализира "много към много" връзка чрез EventParticipant таблица
        /// </summary>
        public ICollection<LibraryEvent> Events { get; set; }
    }
}

